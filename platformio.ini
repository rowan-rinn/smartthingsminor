; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = lolin32

[base]
framework = arduino
build_unflags = 
	-std=gnu++11
build_flags = 
	-std=gnu++23

[base_esp32]
platform = https://github.com/Jason2866/platform-espressif32.git#Arduino/IDF5
monitor_speed = 115200
board_build.filesystem = littlefs
extends = base
build_flags =
    ${base.build_flags}
    ; -D BASE_ESP32=1
    -D CORE_DEBUG_LEVEL=3
    ; [CORE_DEBUG_LEVEL]
    ; 0 = none
    ; 1 = errors
    ; 2 = errors, warnings
    ; 3 = errors, warnings, info
    ; 4 = errors, warnings, info, debug
    ; 5 = errors, warnings, info, debug, verbose
    ; [TFT_eSPI]
    -D USER_SETUP_LOADED=1
    -D ILI9488_DRIVER=1
    -D LOAD_GLCD=1
    -D LOAD_FONT2=1
    -D LOAD_FONT4=1
    -D LOAD_FONT6=1
    -D LOAD_FONT7=1
    -D LOAD_FONT8=1
    -D LOAD_GFXFF=1
    ; -D SMOOTH_FONT=1
    -D SPI_FREQUENCY=27000000
    -D SPI_READ_FREQUENCY=16000000
    -D SPI_TOUCH_FREQUENCY=2500000
lib_deps =
    bodmer/TFT_eSPI@^2.5.43
    tzapu/WiFiManager@^2.0.17
    https://github.com/laurb9/StepperDriver

[env:lolin32]
board = lolin32
extends = base_esp32
build_flags =
    ${base_esp32.build_flags}
    ; -D BOARD_LOLIN32=1
    -D TURBIDITY_PIN=34
    -D LED_PIN=13
    ; [TFT_eSPI]
    -D TFT_MISO=19
    -D TFT_MOSI=23
    -D TFT_SCLK=18
    -D TFT_CS=5
    -D TFT_DC=2
    -D TFT_RST=15
    -D TOUCH_CS=4

[env:wemos_d1_uno32]
board = wemos_d1_uno32
extends = base_esp32
build_flags =
    ${base_esp32.build_flags}
    ; -D BOARD_WEMOS_D1_UNO32=1
    -D TURBIDITY_PIN=34
    -D LED_PIN=LED_BUILTIN
    ; [TFT_eSPI]
    -D TFT_MISO=19
    -D TFT_MOSI=23
    -D TFT_SCLK=18
    -D TFT_CS=13
    -D TFT_DC=12
    -D TFT_RST=14
    -D TOUCH_CS=4
